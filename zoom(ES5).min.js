"use strict";var _slicedToArray=function(){function a(b,c){var d=[],f=!0,g=!1,h=void 0;try{for(var k,j=b[Symbol.iterator]();!(f=(k=j.next()).done)&&(d.push(k.value),!(c&&d.length===c));f=!0);}catch(l){g=!0,h=l}finally{try{!f&&j["return"]&&j["return"]()}finally{if(g)throw h}}return d}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var Zoom=function(){function a(_ref){var _ref$ele=_ref.ele,b=void 0===_ref$ele?this.throwError("ele"):_ref$ele,_ref$edgeEle=_ref.edgeEle,c=void 0===_ref$edgeEle?b.parentElement:_ref$edgeEle;_classCallCheck(this,a),this.ele=b,this.edgeEle=c,this.widthHeight=[b.clientWidth,b.clientHeight],this.pointsArr=null,this.isZoom=!1,this.havePoints=!1,this.init()}return _createClass(a,[{key:"throwError",value:function throwError(b){throw new Error("parameter "+b+" can not be empty!")}},{key:"init",value:function init(){var d=this,b=this.ele,c=this.edgeEle;b.parentElement!==c&&(c.appendChild(b),c.style.position="relative"),b.addEventListener("dblclick",function(){d.havePoints||(d.createPoints(),d.havePoints=!0),d.isZoom?(d.pointsArr.forEach(function(f){f.style.display="none"}),d.isZoom=!1):(d.pointsArr.forEach(function(f){f.style.display="inline-block"}),d.isZoom=!0)},!1),b=c=null}},{key:"createPoints",value:function createPoints(){var b=document.createElement("span"),c=[],d=0;b.className="zoomEle-point";do c.push(b.cloneNode(!0));while(8>++d);this.pointsArr=c,this.addPoints(c),b=c=null}},{key:"setPointsPosition",value:function setPointsPosition(){var b=8,_widthHeight=_slicedToArray(this.widthHeight,2),c=_widthHeight[0],d=_widthHeight[1],f=[[-(b/2),-(b/2)],[(c-b)/2,-(b/2)],[c-b/2,-(b/2)],[-(b/2),(d-b)/2],[c-b/2,(d-b)/2],[-(b/2),d-b/2],[(c-b)/2,d-b/2],[c-b/2,d-b/2]];this.pointsArr.forEach(function(g,h){g.style.left=f[h][0]+"px",g.style.top=f[h][1]+"px"})}},{key:"addPoints",value:function addPoints(b){var c=this.ele,d=["nw-resize","n-resize","ne-resize","w-resize","e-resize","sw-resize","s-resize","se-resize"];this.setPointsPosition(),b.forEach(function(f,g){f.style.cursor=d[g],c.appendChild(f)}),this.handlePoints(b),c=b=null}},{key:"handlePoints",value:function handlePoints(b){var g=this,c=this,d=this.ele,f=function(h,j){var k=h,l=document,m=[k.clientX,k.clientY],_that$widthHeight=_slicedToArray(c.widthHeight,2),n=_that$widthHeight[0],o=_that$widthHeight[1],p=g.edgeEle,_ref2=[p.clientWidth,p.clientHeight],q=_ref2[0],r=_ref2[1],s=n,t=o,u=parseFloat((n/o).toFixed(2)),v=function(x,y,z,A){var _ref3=function(G,H){return 0===H?[m[0]-G.clientX+n,m[1]-G.clientY+o]:1===H?[n,m[1]-G.clientY+o]:2===H?[G.clientX-m[0]+n,m[1]-G.clientY+o]:3===H?[m[0]-G.clientX+n,o]:4===H?[G.clientX-m[0]+n,o]:5===H?[m[0]-G.clientX+n,G.clientY-m[1]+o]:6===H?[n,G.clientY-m[1]+o]:7===H?[G.clientX-m[0]+n,G.clientY-m[1]+o]:void 0}(A,x),_ref4=_slicedToArray(_ref3,2),C=_ref4[0],D=_ref4[1];if([0,2,5,7].includes(x))if(C>=y)D=y/u;else if(D>=z)C=z*u;else{var E=parseFloat((C/u).toFixed(2)),F=D*u;Math.abs(E-D)>Math.abs(F-C)?C=F:D=E}C=20<C?C>y?y:C:20,D=20<D?D>z?z:D:20,c.widthHeight=[C,D],c.setPointsPosition(),c.ele.style.width=C+"px",c.ele.style.height=D+"px"};k.preventDefault(),0===j?(d.style.right=p.clientWidth-(d.offsetLeft+d.offsetWidth)+"px",d.style.bottom=p.clientHeight-(d.offsetTop+d.offsetHeight)+"px",d.style.left="unset",d.style.top="unset",s=n+d.offsetLeft,t=o+d.offsetTop):1===j?(d.style.bottom=p.clientHeight-(d.offsetTop+d.offsetHeight)+"px",d.style.top="unset",t=o+d.offsetTop):2===j?(d.style.left=d.offsetLeft+"px",d.style.bottom=p.clientHeight-(d.offsetTop+d.offsetHeight)+"px",d.style.top="unset",d.style.right="unset",s=q-d.offsetLeft,t=o+d.offsetTop):3===j?(d.style.right=p.clientWidth-(d.offsetLeft+d.offsetWidth)+"px",d.style.left="unset",s=n+d.offsetLeft):4===j?(d.style.left=d.offsetLeft+"px",d.style.right="unset",s=q-d.offsetLeft):5===j?(d.style.top=d.offsetTop+"px",d.style.right=p.clientWidth-(d.offsetLeft+d.offsetWidth)+"px",d.style.left="unset",d.style.bottom="unset",s=n+d.offsetLeft,t=r-d.offsetTop):6===j?(d.style.top=d.offsetTop+"px",d.style.bottom="unset",t=r-d.offsetTop):7===j?(d.style.left=d.offsetLeft+"px",d.style.top=d.offsetTop+"px",d.style.right="unset",d.style.bottom="unset",s=q-d.offsetLeft,t=r-d.offsetTop):void 0;var w=function(x){v(j,s,t,x)};l.addEventListener("mousemove",w,!1),l.addEventListener("mouseup",function(){l.removeEventListener("mousemove",w,!1)},!1)};b.forEach(function(h,j){h.addEventListener("mousedown",function(k){f(k,j),k.stopPropagation()},!1)}),b=null}}]),a}();